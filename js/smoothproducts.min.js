(function(e){e.fn.extend({smoothproducts:function(){return this.each(function(){e(".sp-wrap").append('<div class="sp-large"></div><div class="sp-thumbs sp-tb-active"></div>');e(".sp-wrap a").appendTo(".sp-thumbs");e(".sp-thumbs a:first").addClass("sp-current").clone().removeClass("sp-current").appendTo(".sp-large").addClass("sp-current-big");e(".sp-wrap").css("display","inline-block");var t=300,n=e(".sp-large img").width();e(document.body).on("click",".sp-thumbs",function(e){e.preventDefault()});e(document.body).on("click",".sp-tb-active a",function(n){e(".sp-current").removeClass();e(".sp-thumbs").removeClass("sp-tb-active");e(".sp-zoom").remove();var r=e(".sp-large").height(),i=e(".sp-large").width();e(".sp-large").css({overflow:"hidden",height:r+"px",width:i+"px"});e(".sp-large a").remove();e(this).addClass("sp-current").clone().hide().removeClass("sp-current").appendTo(".sp-large").addClass("sp-current-big").fadeIn(t,function(){var t=e(".sp-large img").height();e(".sp-large").animate({height:t},"fast",function(){e(".sp-large").css({height:"auto",width:"auto"})});e(".sp-thumbs").addClass("sp-tb-active")});n.preventDefault()});e(document.body).on("click",".sp-large a",function(t){var n=e(this).attr("href");e(".sp-large").append('<div class="sp-zoom"><img src="'+n+'"/></div>');e(".sp-zoom").fadeIn();e(".sp-large").css({left:0,top:0});e(".sp-zoom").draggable();t.preventDefault()});e(".sp-large").mousemove(function(t){var n=e(".sp-large").width();var r=e(".sp-large").height();var i=e(".sp-zoom").width();var s=e(".sp-zoom").height();var o=e(this).parent().offset();var u=t.pageX-o.left;var a=t.pageY-o.top;var f=Math.floor(u*(n-i)/n);var l=Math.floor(a*(r-s)/r);e(".sp-zoom").css({left:f,top:l})}).mouseout(function(){});e.fn.draggable=function(){var t=null;var n=function(n){var r=n.originalEvent;var i=e(this).position();t={x:r.changedTouches[0].pageX-i.left,y:r.changedTouches[0].pageY-i.top}};var r=function(n){n.preventDefault();var r=n.originalEvent,i=r.changedTouches[0].pageY-t.y,s=r.changedTouches[0].pageX-t.x,o=(e(".sp-zoom").height()-e(".sp-large").height())*-1,u=(e(".sp-zoom").width()-e(".sp-large").width())*-1;if(i>o&&0>i){e(this).css({top:i})}if(s>u&&0>s){e(this).css({left:s})}};this.bind("touchstart",n);this.bind("touchmove",r)};e(document.body).on("click",".sp-zoom",function(t){e(this).fadeOut(function(){e(this).remove()})})})}})})(jQuery)